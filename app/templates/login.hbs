<header class="bar bar-nav weathermatic-header">
  {{logo-header}}
</header>

<div class="content weathermatic-content">
  <div class="content-padded">
    <form id="login-form" onsubmit="return false;" {{action 'logIn' on='submit'}}>
      <center>
        <h2>
          {{fa-icon 'key'}} Please log in
        </h2>
        <br>
        {{input type='email' placeholder='Email' value=email required=true}}
        {{input type='password' placeholder='Password' value=password required=true}}

        <!-- Looks stupid, but required for iOS:
          http://stackoverflow.com/questions/5329192/search-button-works-on-simulator-but-not-on-device-jqtouch-and-phonegap

          Without this, iOS ignores the onsubmit attribute on the form (in which we tell the form not to submit) and
          the form will actually try to submit (to nowhere), which takes the user off to a useless blank screen that
          they can't recover from without restarting the app :(
        -->
        <input name="dummy" type="submit" value="" style="position:absolute; visibility:hidden;"/>

        <button id="login-button" class="btn btn-block btn-positive" onclick="return false;"
          {{action 'logIn'}} {{bind-attr disabled=isLoading}}>

          {{#if hasErrored}}
            Retry
          {{else}}
            Log In
          {{/if}}

          {{#if isLoading}}
            {{fa-icon 'spinner fa-pulse'}}
          {{else}}
            {{fa-icon 'sign-in'}}
          {{/if}}
        </button>
        {{#if isError}}
          <div class="errors">
            <center>
              <h4>{{fa-icon 'warning'}} Login failed</h4>
            </center>
            <p class="messages">Please check your email and password</p>
          </div>
        {{/if}}
        <p class="login-help">If you don't have an account yet, please go to
          <a href="javascript:void(0)" {{action 'createAccount'}}>
            <strong>smartlinknetwork.com</strong>
          </a>
          and sign up.
        </p>
      </center>
    </form>
  </div>
</div>

<div id="login-success" {{bind-attr class=':modal isSuccess:active'}}>
  <div class="content-padded loading-icon">
    <br>
    <h1>
      <center>{{fa-icon 'spinner fa-pulse'}} Loadingâ€¦</center>
    </h1>
  </div>
</div>
